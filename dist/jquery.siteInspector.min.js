/*
 *  Site Inspector - v0.1.0
 *  A jQuery plugin to inspect a site's markup.
 *  https://github.com/anthonygreco/siteInspector
 *
 *  Made by Anthony Greco
 *  Under MIT License
 */
"use strict";!function(a){function b(b,c){function d(){C.debug&&console.time("Init"),h(),i(),g("onInit"),C.debug&&console.timeEnd("Init")}function e(){C.debug&&console.log("Destroying Plugin"),y.each(function(){k(),o(),m(),a(this).find(".ui.inspector").remove(),g("onDestroy"),a(this).removeData("siteInspector")})}function f(a,b){return b?(C.debug&&console.log("Setting option for "+a+" to "+b),void(C[a]=b)):(C.debug&&console.log("Returning option for "+a+" as "+C[a]),C[a])}function g(a){if(void 0===C[a])throw new Error("Hook "+a+" does not exist on jQuery.siteInspector");C[a].call(x)}function h(){C.debug&&console.log("Appending CSS");var b=C.cssFile?C.cssFile:C.debug?"../css/jquery-siteInspector.css":"../css/jquery-siteInspector.min.css";a("head").append('<link rel="stylesheet" href="../components/font-awesome/css/font-awesome.css" /><link rel="stylesheet" href="'+b+'" />')}function i(){C.debug&&console.log("Building UI");var b=a("<div />",{"class":"cover ui inspector"}),c=a("<div />",{id:"overlay","class":"ui inspector"}).append([b.clone(),b.clone(),b.clone(),b.clone()]),d=a("<div />",{id:"inspect","class":"ui inspector"}).on(n()).append(a("<i />",{"class":"fa fa-search ui inspector"})),e=a("<div />",{id:"uiWrapper","class":"ui inspector"}).append(d),f=a("<div />",{"class":"tag ui inspector"});a("body").append([e,c,f]),j(),l()}function j(){C.debug&&console.log("Binding Window Events"),a(window).on({"scroll.siteInspector.window":function(){q()},"resize.siteInspector.window":function(){q()}})}function k(){C.debug&&console.log("Unbinding Window Events"),a(window).off("scroll.siteInspector.window resize.siteInspector.window")}function l(){C.debug&&console.log("Binding Leave Event"),window.onbeforeunload=function(){return z?"INSPECTION IS CURRENTLY ENABLED!":void 0}}function m(){C.debug&&console.log("Unbinding Leave Event"),window.onbeforeunload=null}function n(){return C.debug&&console.log("Binding Inspection Button Event"),{"click.siteInspector.inspectionButton":function(){p()},"mouseenter.siteInspector.inspectionButton":function(){z||a(this).find("i").addClass("active")},"mouseleave.siteInspector.inspectionButton":function(){z||a(this).find("i").removeClass("active")}}}function o(){C.debug&&console.log("Unbinding Inspection Button Event"),a("#inspect").off("click.siteInspector.inspectionButton mouseenter.siteInspector.inspectionButton mouseleave.siteInspector.inspectionButton"),a(x).find("*:not(.ui)").off("mouseenter.siteInspector.inspection"),a(x).css("cursor","default")}function p(){z=!z,C.debug&&console.log("Toggling Inspection. Enabled?",z),z?(a(x).css("cursor","cell"),a("#uiWrapper #inspect i").addClass("active"),a(x).find("*:not(.ui)").on({"mouseenter.siteInspector.inspection":function(a){A||(B=a.currentTarget,s())}})):A||(a(x).css("cursor","default"),a("#uiWrapper #inspect i").removeClass("active"),a(x).find("*:not(.ui)").off("mouseenter.siteInspector.inspection"),r(),C.showTags&&a(".tag").remove())}function q(){z&&s()}function r(){B=null,a(".cover").css({width:0,height:0})}function s(b){var c=a(void 0===b?B:b);if(void 0!==c.offset()){C.showTags&&t();var d={top:c.offset().top-a(window).scrollTop(),left:c.offset().left,bottom:c.offset().top-a(window).scrollTop()+c.height(),right:c.offset().left+c.width()},e=[{top:0,left:0,width:0===d.left?0:"100%",height:0===d.top?0:d.top},{top:d.top,left:0,width:d.left,height:a(window).height()-d.top},{top:d.top+c.outerHeight(),left:d.left,width:a(window).width()-d.left,height:a(window).height()-d.bottom},{top:d.top,left:d.left+c.outerWidth(),width:a(window).width()-(d.left+c.outerWidth()),height:c.outerHeight()}];a(".cover").each(function(b){a(this).css(e[b])})}}function t(){var b={offset:a(B).offset(),height:a(B).outerHeight()},c=a(B).uniqueSelector(),d=a(".tag");return d.data("selector")===c?!1:void d.hide().data("selector",c).html(u()).css({top:b.offset.top+b.height+d.height()>=a(document).height()?20:b.offset.top+b.height,left:b.offset.top+b.height+d.height()>=a(document).height()?20:b.offset.left,position:b.offset.top+b.height+d.height()>=a(document).height()?"fixed":"absolute"}).show()}function u(){var b='<span class="ui inspector node">'+B.nodeName.toLowerCase()+"</span>",c=a(B),d=void 0!==c.attr("id")?'<span class="ui inspector id">#'+c.attr("id")+"</span>":"",e=""!==B.className?'<span class="ui inspector className">.'+B.className.split(" ").join(".")+"</span>":"";return b+d+e+' <span class="ui inspector dimensions">'+c.outerWidth()+'px <i class="ui inspector fa fa-times" /> '+c.outerHeight()+"px</span>"}function v(){return z}function w(){return A=!A,C.debug&&console.log("Toggling Frozen. Frozen?",A),A}var x=b,y=a(b),z=!1,A=!1,B=null,C=a.extend({},a.fn.siteInspector.defaults,c);return d(),{option:f,destroy:e,isEnabled:v,toggleFrozen:w}}a.fn.siteInspector=function(c){if("string"==typeof arguments[0]){var d,e=arguments[0],f=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!a.data(this,"siteInspector")||"function"!=typeof a.data(this,"siteInspector")[e])throw new Error("Method "+e+" does not exist on jQuery.siteInspector");d=a.data(this,"siteInspector")[e].apply(this,f)}),void 0!==d?d:this}return"object"!=typeof c&&c?void 0:this.each(function(){a.data(this,"siteInspector")||a.data(this,"siteInspector",new b(this,c))})},a.fn.siteInspector.defaults={debug:!1,showTags:!1,cssFile:!1,onInit:function(){},onDestroy:function(){}}}(jQuery);
/*
 *  Site Inspector - v0.1.0
 *  A jQuery plugin to inspect a site's markup.
 *  https://github.com/anthonygreco/siteInspector
 *
 *  Made by Anthony Greco
 *  Under MIT License
 */
"use strict";!function(a){function b(b,c){function d(){D.debug&&console.time("jquery.siteInspector Init"),h(),i(),g("onInit"),D.debug&&console.timeEnd("jquery.siteInspector Init")}function e(){D.debug&&v("Destroying Plugin"),z.each(function(){k(),o(),m(),a(this).find(".ui.inspector").remove(),g("onDestroy"),a(this).removeData("siteInspector")})}function f(a,b){return b?(D.debug&&v("Setting option for "+a+" to "+b),void(D[a]=b)):(D.debug&&v("Returning option for "+a+" as "+D[a]),D[a])}function g(a){if(void 0===D[a])throw new Error("Hook "+a+" does not exist on jQuery.siteInspector");D[a].call(y)}function h(){D.debug&&v("Appending CSS");var b=D.debug&&D.cssPath===!1?".css":".min.css",c=D.cssPath?D.cssPath:"/css/jquery-siteInspector"+b,d=D.fontAwesomePath?D.fontAwesomePath:"/components/font-awesome/css/font-awesome.css";a("head").append('<link rel="stylesheet" href="'+d+'" /><link rel="stylesheet" href="'+c+'" />')}function i(){D.debug&&v("Building UI");var b=a("<div />",{"class":"cover ui inspector"}),c=a("<div />",{id:"overlay","class":"ui inspector"}).append([b.clone(),b.clone(),b.clone(),b.clone()]),d=a("<div />",{id:"inspect","class":"ui inspector"}).on(n()).append(a("<i />",{"class":"fa fa-search ui inspector"})),e=a("<div />",{id:"uiWrapper","class":"ui inspector"}).append(d),f=a("<div />",{"class":"tag ui inspector"});a("body").append([e,c,f]),j(),l()}function j(){D.debug&&v("Binding Window Events"),a(window).on({"scroll.siteInspector.window":function(){q()},"resize.siteInspector.window":function(){q()}})}function k(){D.debug&&v("Unbinding Window Events"),a(window).off("scroll.siteInspector.window resize.siteInspector.window")}function l(){D.debug&&v("Binding Leave Event"),window.onbeforeunload=function(){return A?"INSPECTION IS CURRENTLY ENABLED!":void 0}}function m(){D.debug&&v("Unbinding Leave Event"),window.onbeforeunload=null}function n(){return D.debug&&v("Binding Inspection Button Event"),{"click.siteInspector.inspectionButton":function(){p()},"mouseenter.siteInspector.inspectionButton":function(){A||a(this).find("i").addClass("active")},"mouseleave.siteInspector.inspectionButton":function(){A||a(this).find("i").removeClass("active")}}}function o(){D.debug&&v("Unbinding Inspection Button Event"),a("#inspect").off("click.siteInspector.inspectionButton mouseenter.siteInspector.inspectionButton mouseleave.siteInspector.inspectionButton"),a(y).find("*:not(.ui)").off("mouseenter.siteInspector.inspection"),a(y).css("cursor","default")}function p(){A=!A,D.debug&&v("Toggling Inspection. Enabled? "+A),A?(a(y).css("cursor","cell"),a("#uiWrapper #inspect i").addClass("active"),a(y).find("*:not(.ui)").on({"mouseenter.siteInspector.inspection":function(a){B||(C=a.currentTarget,s())}})):B||(a(y).css("cursor","default"),a("#uiWrapper #inspect i").removeClass("active"),a(y).find("*:not(.ui)").off("mouseenter.siteInspector.inspection"),r(),D.showTags&&a(".tag").remove())}function q(){A&&s()}function r(){C=null,a(".cover").css({width:0,height:0})}function s(b){var c=a(void 0===b?C:b);if(void 0!==c.offset()){D.showTags&&t();var d={top:c.offset().top-a(window).scrollTop(),left:c.offset().left,bottom:c.offset().top-a(window).scrollTop()+c.height(),right:c.offset().left+c.width()},e=[{top:0,left:0,width:0===d.left?0:"100%",height:0===d.top?0:d.top},{top:d.top,left:0,width:d.left,height:a(window).height()-d.top},{top:d.top+c.outerHeight(),left:d.left,width:a(window).width()-d.left,height:a(window).height()-d.bottom},{top:d.top,left:d.left+c.outerWidth(),width:a(window).width()-(d.left+c.outerWidth()),height:c.outerHeight()}];a(".cover").each(function(b){a(this).css(e[b])})}}function t(){var b={offset:a(C).offset(),height:a(C).outerHeight()},c=a(C).uniqueSelector(),d=a(".tag");return d.data("selector")===c?!1:void d.hide().data("selector",c).html(u()).css({top:b.offset.top+b.height+d.height()>=a(document).height()?20:b.offset.top+b.height,left:b.offset.top+b.height+d.height()>=a(document).height()?20:b.offset.left,position:b.offset.top+b.height+d.height()>=a(document).height()?"fixed":"absolute"}).show()}function u(){var b='<span class="ui inspector node">'+C.nodeName.toLowerCase()+"</span>",c=a(C),d=void 0!==c.attr("id")?'<span class="ui inspector id">#'+c.attr("id")+"</span>":"",e=""!==C.className?'<span class="ui inspector className">.'+C.className.split(" ").join(".")+"</span>":"";return b+d+e+' <span class="ui inspector dimensions">'+c.outerWidth()+'px <i class="ui inspector fa fa-times" /> '+c.outerHeight()+"px</span>"}function v(a){console.log("jquery.siteInspector LOG: "+a)}function w(){return A}function x(){return B=!B,D.debug&&v("Toggling Frozen. Frozen? "+B),B}var y=b,z=a(b),A=!1,B=!1,C=null,D=a.extend({},a.fn.siteInspector.defaults,c);return d(),{option:f,destroy:e,isEnabled:w,toggleFrozen:x}}a.fn.siteInspector=function(c){if("string"==typeof arguments[0]){var d,e=arguments[0],f=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!a.data(this,"siteInspector")||"function"!=typeof a.data(this,"siteInspector")[e])throw new Error("Method "+e+" does not exist on jQuery.siteInspector");d=a.data(this,"siteInspector")[e].apply(this,f)}),void 0!==d?d:this}return"object"!=typeof c&&c?void 0:this.each(function(){a.data(this,"siteInspector")||a.data(this,"siteInspector",new b(this,c))})},a.fn.siteInspector.defaults={debug:!1,showTags:!1,cssPath:!1,fontAwesomePath:!1,onInit:function(){},onDestroy:function(){}}}(jQuery);
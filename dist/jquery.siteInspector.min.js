/*
 *  Site Inspector - v0.1.0
 *  A jQuery plugin to inspect a site's markup.
 *  https://github.com/anthonygreco/siteInspector
 *
 *  Made by Anthony Greco
 *  Under MIT License
 */
"use strict";jQuery.fn.extend({uniqueSelector:function(a){if(a="undefined"==typeof a?"":a,this.is("html"))return"html"+a;var b=this.get(0).nodeName.toLowerCase();return b+=this.index()>-1?":nth-child("+(this.index()+1)+")":"",this.parent().uniqueSelector(" > "+b+a)}}),function(a,b,c,d){var e={init:function(b,c){var e=this;e.options=a.extend({},a.fn.siteInspector.options,b),e.options.debug&&console.time("init"),e.data={mainTarget:c,inspectionEnabled:!1,inspectionTarget:d},e._buildUI(c),e.options.debug&&console.timeEnd("init")},_buildUI:function(){var b=this,c=a("<div />",{"class":"cover ui"}),d=a("<div />",{id:"overlay","class":"ui"}).append([c.clone(),c.clone(),c.clone(),c.clone()]),e=a("<div />",{id:"inspect","class":"ui"}).on(b._bindInspection()).append(a("<i />",{"class":"fa fa-search ui"})),f=a("<div />",{id:"uiWrapper","class":"ui"}).append(e);a("body").append([f,d]),b._bindWindowEvents()},_bindWindowEvents:function(){var c=this;a(b).on({scroll:function(){c._refreshDisplay()},resize:function(){c._refreshDisplay()}})},_unbindWindowEvents:function(){a(b).off("scroll resize")},_bindInspection:function(){var b=this;return{click:function(){b._toggleInspection()},mouseenter:function(){b.data.inspectionEnabled||a(this).find("i").addClass("active")},mouseleave:function(){b.data.inspectionEnabled||a(this).find("i").removeClass("active")}}},_toggleInspection:function(){var b=this;b.data.inspectionEnabled=!b.data.inspectionEnabled,b.data.inspectionEnabled?(a(b.data.mainTarget).css("cursor","cell"),a("#uiWrapper #inspect i").addClass("active"),a(b.data.mainTarget).find("*:not(.ui)").on({mouseenter:function(a){b.data.inspectionTarget=a.currentTarget,b._highlightElement()}})):(a(b.data.mainTarget).css("cursor","default"),a(b.data.mainTarget).find("*:not(.ui)").off(),b._unhighlightElement())},_refreshDisplay:function(){var a=this;a.data.inspectionEnabled&&a._highlightElement()},_showTags:function(){var b=this,d={offset:a(b.data.inspectionTarget).offset(),height:a(b.data.inspectionTarget).outerHeight()};if(a(".tag").length){if(a(".tag").data("selector")===a(b.data.inspectionTarget).uniqueSelector())return!1;a(".tag").remove()}var e=a("<div />",{"class":"tag ui"}).data("selector",a(b.data.inspectionTarget).uniqueSelector()).html(b._formatInfo()).appendTo(b.data.mainTarget);e.css({top:d.offset.top+d.height+e.height()>=a(c).height()?20:d.offset.top+d.height,left:d.offset.top+d.height+e.height()>=a(c).height()?20:d.offset.left,position:d.offset.top+d.height+e.height()>=a(c).height()?"fixed":"absolute"}).show()},_formatInfo:function(){var b=this,c='<span class="ui node">'+b.data.inspectionTarget.nodeName.toLowerCase()+"</span>",e=a(b.data.inspectionTarget).attr("id")!==d?'<span class="ui id">#'+a(b.data.inspectionTarget).attr("id")+"</span>":"",f=""!==b.data.inspectionTarget.className?'<span class="ui className">.'+b.data.inspectionTarget.className.split(" ").join(".")+"</span>":"";return c+e+f+' <span class="ui dimensions">'+a(b.data.inspectionTarget).outerWidth()+'px <i class="ui fa fa-times" /> '+a(b.data.inspectionTarget).outerHeight()+"px</span>"},_highlightElement:function(){var c=this,e=a(c.data.inspectionTarget);if(e.offset()!==d){c.options.showTags&&c._showTags();var f={top:e.offset().top-a(b).scrollTop(),left:e.offset().left,bottom:e.offset().top-a(b).scrollTop()+e.height(),right:e.offset().left+e.width()},g=[{top:0,left:0,width:0===f.left?0:"100%",height:0===f.top?0:f.top},{top:f.top,left:0,width:f.left,height:a(b).height()-f.top},{top:f.top+e.outerHeight(),left:f.left,width:a(b).width()-f.left,height:a(b).height()-f.bottom},{top:f.top,left:f.left+e.outerWidth(),width:a(b).width()-(f.left+e.outerWidth()),height:e.outerHeight()}];a(".cover").each(function(b){a(this).css(g[b])})}},_unhighlightElement:function(){var b=this;b.data.inspectionTarget=d,a(".cover").css({width:0,height:0}),b.options.showTags&&a(".tag").remove()},isEnabled:function(){var a=this;return a.data.inspectionEnabled}};a.fn.siteInspector=function(b){return this.each(function(){var c=Object.create(e);c.init(b,this),a.data(this,"siteInspector",c)})},a.fn.siteInspector.options={debug:!1}}(jQuery,window,document);
/*
 *  Site Inspector - v0.1.0
 *  A jQuery plugin to inspect a site's markup.
 *  https://github.com/anthonygreco/siteInspector
 *
 *  Made by Anthony Greco
 *  Under MIT License
 */
"use strict";!function(a){function b(b,c){function d(){B.debug&&console.time("init"),h(),g("onInit"),B.debug&&console.timeEnd("init")}function e(){x.each(function(){j(),n(),l(),a(this).find(".ui.inspector").remove(),g("onDestroy"),a(this).removeData("siteInspector")})}function f(a,b){return b?void(c[a]=b):c[a]}function g(a){void 0!==c[a]&&c[a].call(w)}function h(){var b=a("<div />",{"class":"cover ui inspector"}),c=a("<div />",{id:"overlay","class":"ui inspector"}).append([b.clone(),b.clone(),b.clone(),b.clone()]),d=a("<div />",{id:"inspect","class":"ui inspector"}).on(m()).append(a("<i />",{"class":"fa fa-search ui inspector"})),e=a("<div />",{id:"uiWrapper","class":"ui inspector"}).append(d);a("body").append([e,c]),i(),k()}function i(){a(window).on({"scroll.siteInspector.window":function(){p()},"resize.siteInspector.window":function(){p()}})}function j(){a(window).off("scroll.siteInspector.window resize.siteInspector.window")}function k(){window.onbeforeunload=function(){return y?"INSPECTION IS CURRENTLY ENABLED!":void 0}}function l(){window.onbeforeunload=null}function m(){return{"click.siteInspector.inspectionButton":function(){o()},"mouseenter.siteInspector.inspectionButton":function(){y||a(this).find("i").addClass("active")},"mouseleave.siteInspector.inspectionButton":function(){y||a(this).find("i").removeClass("active")}}}function n(){a("#inspect").off("click.siteInspector.inspectionButton mouseenter.siteInspector.inspectionButton mouseleave.siteInspector.inspectionButton"),a(w).find("*:not(.ui)").off("mouseenter.siteInspector.inspection"),a(w).css("cursor","default")}function o(){y=!y,B.debug&&console.log("InspectionEnabled?",y),y?(a(w).css("cursor","cell"),a("#uiWrapper #inspect i").addClass("active"),a(w).find("*:not(.ui)").on({"mouseenter.siteInspector.inspection":function(a){z||(A=a.currentTarget,r())}})):z||(a(w).css("cursor","default"),a("#uiWrapper #inspect i").removeClass("active"),a(w).find("*:not(.ui)").off("mouseenter.siteInspector.inspection"),q(),B.showTags&&a(".tag").remove())}function p(){y&&r()}function q(){A=null,a(".cover").css({width:0,height:0})}function r(b){var c=a(void 0===b?A:b);if(void 0!==c.offset()){B.showTags&&s();var d={top:c.offset().top-a(window).scrollTop(),left:c.offset().left,bottom:c.offset().top-a(window).scrollTop()+c.height(),right:c.offset().left+c.width()},e=[{top:0,left:0,width:0===d.left?0:"100%",height:0===d.top?0:d.top},{top:d.top,left:0,width:d.left,height:a(window).height()-d.top},{top:d.top+c.outerHeight(),left:d.left,width:a(window).width()-d.left,height:a(window).height()-d.bottom},{top:d.top,left:d.left+c.outerWidth(),width:a(window).width()-(d.left+c.outerWidth()),height:c.outerHeight()}];a(".cover").each(function(b){a(this).css(e[b])})}}function s(){var b={offset:a(A).offset(),height:a(A).outerHeight()};if(a(".tag").length){if(a(".tag").data("selector")===a(A).uniqueSelector())return!1;a(".tag").remove()}var c=a("<div />",{"class":"tag ui inspector"}).data("selector",a(A).uniqueSelector()).html(t()).appendTo(w);c.css({top:b.offset.top+b.height+c.height()>=a(document).height()?20:b.offset.top+b.height,left:b.offset.top+b.height+c.height()>=a(document).height()?20:b.offset.left,position:b.offset.top+b.height+c.height()>=a(document).height()?"fixed":"absolute"}).show()}function t(){var b='<span class="ui inspector node">'+A.nodeName.toLowerCase()+"</span>",c=void 0!==a(A).attr("id")?'<span class="ui inspector id">#'+a(A).attr("id")+"</span>":"",d=""!==A.className?'<span class="ui inspector className">.'+A.className.split(" ").join(".")+"</span>":"";return b+c+d+' <span class="ui inspector dimensions">'+a(A).outerWidth()+'px <i class="ui inspector fa fa-times" /> '+a(A).outerHeight()+"px</span>"}function u(){return y}function v(){z=!z,B.debug&&console.log("Inspection is Frozen",z)}var w=b,x=a(b),y=!1,z=!1,A=null,B=a.extend({},a.fn.siteInspector.defaults,c);return d(),{option:f,destroy:e,isEnabled:u,toggleFrozen:v}}a.fn.siteInspector=function(c){if("string"==typeof arguments[0]){var d,e=arguments[0],f=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!a.data(this,"siteInspector")||"function"!=typeof a.data(this,"siteInspector")[e])throw new Error("Method "+e+" does not exist on jQuery.siteInspector");d=a.data(this,"siteInspector")[e].apply(this,f)}),void 0!==d?d:this}return"object"!=typeof c&&c?void 0:this.each(function(){a.data(this,"siteInspector")||a.data(this,"siteInspector",new b(this,c))})},a.fn.siteInspector.defaults={debug:!1,showTags:!1,onInit:function(){},onDestroy:function(){}}}(jQuery);